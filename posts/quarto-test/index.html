<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>What kind of cars do Finns drive? | Paavo Niskala</title><meta name=keywords content="development,communication,data"><meta name=description content="Cars in Finland The Finnish Transport and Communications Agency Traficom shares some open datasets on their website. Here we are going to be looking at open data for vehicles.
Maybe we can learn something about the cars people drive in Finland?
Start with the mandatory imports I will be using Pandas for processing the data and Seaborn-Matplotlib combo for any visualizations.
import pandas as pd import matplotlib.pyplot as plt import seaborn as sns sns."><meta name=author content="Paavo Niskala"><link rel=canonical href=https://pniskala.github.io/posts/quarto-test/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://pniskala.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://pniskala.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://pniskala.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://pniskala.github.io/apple-touch-icon.png><link rel=mask-icon href=https://pniskala.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="What kind of cars do Finns drive?"><meta property="og:description" content="Cars in Finland The Finnish Transport and Communications Agency Traficom shares some open datasets on their website. Here we are going to be looking at open data for vehicles.
Maybe we can learn something about the cars people drive in Finland?
Start with the mandatory imports I will be using Pandas for processing the data and Seaborn-Matplotlib combo for any visualizations.
import pandas as pd import matplotlib.pyplot as plt import seaborn as sns sns."><meta property="og:type" content="article"><meta property="og:url" content="https://pniskala.github.io/posts/quarto-test/"><meta property="og:image" content="https://pniskala.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-05T00:00:00+00:00"><meta property="article:modified_time" content="2021-08-05T00:00:00+00:00"><meta property="og:site_name" content="Paavo Niskala"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://pniskala.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="What kind of cars do Finns drive?"><meta name=twitter:description content="Cars in Finland The Finnish Transport and Communications Agency Traficom shares some open datasets on their website. Here we are going to be looking at open data for vehicles.
Maybe we can learn something about the cars people drive in Finland?
Start with the mandatory imports I will be using Pandas for processing the data and Seaborn-Matplotlib combo for any visualizations.
import pandas as pd import matplotlib.pyplot as plt import seaborn as sns sns."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://pniskala.github.io/posts/"},{"@type":"ListItem","position":2,"name":"What kind of cars do Finns drive?","item":"https://pniskala.github.io/posts/quarto-test/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"What kind of cars do Finns drive?","name":"What kind of cars do Finns drive?","description":"Cars in Finland The Finnish Transport and Communications Agency Traficom shares some open datasets on their website. Here we are going to be looking at open data for vehicles.\nMaybe we can learn something about the cars people drive in Finland?\nStart with the mandatory imports I will be using Pandas for processing the data and Seaborn-Matplotlib combo for any visualizations.\nimport pandas as pd import matplotlib.pyplot as plt import seaborn as sns sns.","keywords":["development","communication","data"],"articleBody":" Cars in Finland The Finnish Transport and Communications Agency Traficom shares some open datasets on their website. Here we are going to be looking at open data for vehicles.\nMaybe we can learn something about the cars people drive in Finland?\nStart with the mandatory imports I will be using Pandas for processing the data and Seaborn-Matplotlib combo for any visualizations.\nimport pandas as pd import matplotlib.pyplot as plt import seaborn as sns sns.set_theme() sns.set_style('darkgrid') sns.set_context('notebook') Load the data At the moment of writing, the latest vehicles dataset is a CSV file of 981 MB (200 MB when compressed to a ZIP file). It was published 2022-06-21, just in time for Juhannus!\nLoading the data into a Pandas DataFrame is quite easy and painless.\ndf = pd.read_csv( 'https://opendata.traficom.fi/Content/Ajoneuvorekisteri.zip', encoding='latin-1', sep=';', low_memory=False) df.info() ","wordCount":"1629","inLanguage":"en","datePublished":"2021-08-05T00:00:00Z","dateModified":"2021-08-05T00:00:00Z","author":{"@type":"Person","name":"Paavo Niskala"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://pniskala.github.io/posts/quarto-test/"},"publisher":{"@type":"Organization","name":"Paavo Niskala","logo":{"@type":"ImageObject","url":"https://pniskala.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://pniskala.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://pniskala.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://pniskala.github.io/posts/ title=posts><span>posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://pniskala.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://pniskala.github.io/posts/>Posts</a></div><h1 class=post-title>What kind of cars do Finns drive?</h1><div class=post-meta><span title='2021-08-05 00:00:00 +0000 UTC'>August 5, 2021</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1629 words&nbsp;·&nbsp;Paavo Niskala&nbsp;|&nbsp;<a href=https://github.com/pniskala/pniskala.github.io/content/posts/quarto-test/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><script src=https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin=anonymous></script>
<script type=application/javascript>define("jquery",[],function(){return window.jQuery})</script><h3 id=cars-in-finland>Cars in Finland<a hidden class=anchor aria-hidden=true href=#cars-in-finland>#</a></h3><p>The Finnish Transport and Communications Agency <a href=https://www.traficom.fi/en/>Traficom</a> shares some open datasets on their website. Here we are going to be looking at <a href="https://www.traficom.fi/en/news/open-data?toggle=Open%20data%20for%20vehicles">open data for vehicles</a>.</p><p>Maybe we can learn something about the cars people drive in Finland?</p><h3 id=start-with-the-mandatory-imports>Start with the mandatory imports<a hidden class=anchor aria-hidden=true href=#start-with-the-mandatory-imports>#</a></h3><p>I will be using Pandas for processing the data and Seaborn-Matplotlib combo for any visualizations.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>set_theme</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>set_style</span><span class=p>(</span><span class=s1>&#39;darkgrid&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>set_context</span><span class=p>(</span><span class=s1>&#39;notebook&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=load-the-data>Load the data<a hidden class=anchor aria-hidden=true href=#load-the-data>#</a></h3><p>At the moment of writing, the latest vehicles dataset is a CSV file of 981 MB (200 MB when compressed to a ZIP file). It was published 2022-06-21, just in time for Juhannus!</p><p>Loading the data into a Pandas DataFrame is quite easy and painless.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;https://opendata.traficom.fi/Content/Ajoneuvorekisteri.zip&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;latin-1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>low_memory</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span></code></pre></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 5236787 entries, 0 to 5236786
Data columns (total 38 columns):
 #   Column                     Dtype  
---  ------                     -----  
 0   ajoneuvoluokka             object 
 1   ensirekisterointipvm       object 
 2   ajoneuvoryhma              float64
 3   ajoneuvonkaytto            float64
 4   variantti                  object 
 5   versio                     object 
 6   kayttoonottopvm            int64  
 7   vari                       object 
 8   ovienLukumaara             float64
 9   korityyppi                 object 
 10  ohjaamotyyppi              float64
 11  istumapaikkojenLkm         float64
 12  omamassa                   float64
 13  teknSuurSallKokmassa       float64
 14  tieliikSuurSallKokmassa    float64
 15  ajonKokPituus              float64
 16  ajonLeveys                 float64
 17  ajonKorkeus                float64
 18  kayttovoima                object 
 19  iskutilavuus               float64
 20  suurinNettoteho            float64
 21  sylintereidenLkm           float64
 22  ahdin                      object 
 23  sahkohybridi               object 
 24  sahkohybridinluokka        float64
 25  merkkiSelvakielinen        object 
 26  mallimerkinta              object 
 27  vaihteisto                 object 
 28  vaihteidenLkm              float64
 29  kaupallinenNimi            object 
 30  voimanvalJaTehostamistapa  float64
 31  tyyppihyvaksyntanro        object 
 32  yksittaisKayttovoima       object 
 33  kunta                      float64
 34  Co2                        float64
 35  matkamittarilukema         float64
 36  valmistenumero2            object 
 37  jarnro                     int64  
dtypes: float64(20), int64(2), object(16)
memory usage: 1.5+ GB
</code></pre><p>It looks like more than five million vehicles have been registered in Finland. There&rsquo;s a total of 38 columns in the data but the column names are in &ndash; no, that is not some mysterious demon language &ndash; Finnish, of course!</p><p>Luckily Traficom shares a description of the columns and what&rsquo;s inside them in an additional Excel file. Descriptions are offered in Finnish, Swedish, and English.</p><p>Reading the metadata with Pandas is easy. For brevity, I&rsquo;ll show here just the first five rows.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>column_info</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_excel</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;https://www.traficom.fi/sites/default/files/media/file/Ajoneuvotiedot_avoin_data_luokitukset_22_02_2022.xlsx&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>sheet_name</span><span class=o>=</span><span class=s1>&#39;MUUTTUJALUETTELO&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>usecols</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>skiprows</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>column_info</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span></code></pre></div><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>tieto</th><th>kuvaus</th><th>Beskrivning</th><th>Description in brief</th></tr></thead><tbody><tr><th>0</th><td>ajoneuvoluokka</td><td>Ajoneuvon direktiivin mukainen luokittelu.</td><td>Fordons klassificering enligt direktivet</td><td>Vehicle classification according to the direct...</td></tr><tr><th>1</th><td>ensirekisterointipvm</td><td>Ajoneuvon ensirekisteröintipäivä.</td><td>Datum för första registrering</td><td>Date of first registration</td></tr><tr><th>2</th><td>ajoneuvoryhma</td><td>Ajoneuvoluokkaa tarkempi luokittelu ajoneuvoille</td><td>Mer exakt klassificering för fordon</td><td>More accurate classification for vehicles</td></tr><tr><th>3</th><td>ajoneuvonkaytto</td><td>Ajoneuvon käyttötieto.</td><td>Information om fordonsanvändning</td><td>Vehicle usage information</td></tr><tr><th>4</th><td>variantti</td><td>Ajoneuvon variantin yksilöivä tunniste</td><td>Unik identifierare för fordonets variant</td><td>Unique identifier of the vehicle variant</td></tr></tbody></table></div><p>The metadata table does not provide us with an easy mapping between the Finnish and English names, so I will not rename the columns. Nevertheless, the metadata can serve as a handy reference for the non-Finnish speakers.</p><p>As mentioned before, the same Excel also contains explanations for the values found in the columns. For example <code>ajoneuvoluokka</code> or vehicle classification should have this kind of values (again showing just the first five rows for brevity):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>vehicle_classification</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_excel</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;https://www.traficom.fi/sites/default/files/media/file/Ajoneuvotiedot_avoin_data_luokitukset_22_02_2022.xlsx&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>sheet_name</span><span class=o>=</span><span class=s1>&#39;AJONEUVOLUOKKA&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>skiprows</span><span class=o>=</span><span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>vehicle_classification</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span></code></pre></div><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>KOODINTUNNUS</th><th>LYHYTSELITE</th><th>PITKASELITE</th><th>LYHYTSELITE_sv</th><th>PITKASELITE_sv</th><th>LYHYTSELITE_en</th><th>PITKASELITE_en</th></tr></thead><tbody><tr><th>0</th><td>C1</td><td>Traktori</td><td>Telaketjutraktori, v &lt;= 40 km/h, m > 600 kg, m...</td><td>Traktor</td><td>Bandtraktor, v &lt;= 40 km/h, m > 600 kg, markfri...</td><td>Tractor</td><td>Tractor</td></tr><tr><th>1</th><td>C2</td><td>Traktori</td><td>Telaketjutraktori, v &lt;= 40 km/h, m > 600 kg, m...</td><td>Traktor</td><td>Bandtraktor, v &lt;= 40 km/h, m > 600 kg, markfri...</td><td>Tractor</td><td>Tractor</td></tr><tr><th>2</th><td>C3</td><td>Traktori</td><td>Telaketjutraktori, v &lt;= 40 km/h, m &lt;= 600 kg</td><td>Traktor</td><td>Bandtraktor, v &lt;= 40 km/h, m &lt;= 600 kg</td><td>Tractor</td><td>Tractor</td></tr><tr><th>3</th><td>C4</td><td>Traktori</td><td>Erityiskäyttöön tarkoitettu telaketjutraktori,...</td><td>Traktor</td><td>Bandtraktor konstruerad för ett särskilt ändam...</td><td>Tractor</td><td>Tractor</td></tr><tr><th>4</th><td>C5</td><td>Traktori</td><td>Telaketjutraktori, v > 40 km/h</td><td>Traktor</td><td>Bandtraktor, v > 40 km/h</td><td>Tractor</td><td>Tractor</td></tr></tbody></table></div><h3 id=cars>Cars!<a hidden class=anchor aria-hidden=true href=#cars>#</a></h3><p>Based on the vehicle classification metadata, it seems like there&rsquo;s information about lots of different vehicles besides just regular cars. If I am interested in the cars regular people drive (henkilöauto in Finnish), classifications <code>M1</code> (cars) and <code>M1G</code> (off-road cars) look like good candidates. One could also consider <code>N1</code> and <code>N1G</code> (vans and off-road vans, respectively).</p><p>Gotta love those verbose English descriptions!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>vehicle_classification</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;KOODINTUNNUS.str.startswith(&#34;M1&#34;)&#39;</span><span class=p>)</span>
</span></span></code></pre></div><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>KOODINTUNNUS</th><th>LYHYTSELITE</th><th>PITKASELITE</th><th>LYHYTSELITE_sv</th><th>PITKASELITE_sv</th><th>LYHYTSELITE_en</th><th>PITKASELITE_en</th></tr></thead><tbody><tr><th>19</th><td>M1</td><td>Henkilöauto</td><td>Matkustajien kuljettamiseen valmistettu ajoneu...</td><td>Personbil</td><td>Ett för persontransport tillverkat fordon med ...</td><td>Car</td><td>Car</td></tr><tr><th>20</th><td>M1G</td><td>Henkilöauto</td><td>Matkustajien kuljettamiseen valmistettu maasto...</td><td>Personbil</td><td>En för persontransport tillverkad terrängbil m...</td><td>Car</td><td>Car</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;ajoneuvoluokka.str.startswith(&#34;M1&#34;)&#39;</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span></code></pre></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 2772248 entries, 2 to 5236786
Data columns (total 38 columns):
 #   Column                     Dtype  
---  ------                     -----  
 0   ajoneuvoluokka             object 
 1   ensirekisterointipvm       object 
 2   ajoneuvoryhma              float64
 3   ajoneuvonkaytto            float64
 4   variantti                  object 
 5   versio                     object 
 6   kayttoonottopvm            int64  
 7   vari                       object 
 8   ovienLukumaara             float64
 9   korityyppi                 object 
 10  ohjaamotyyppi              float64
 11  istumapaikkojenLkm         float64
 12  omamassa                   float64
 13  teknSuurSallKokmassa       float64
 14  tieliikSuurSallKokmassa    float64
 15  ajonKokPituus              float64
 16  ajonLeveys                 float64
 17  ajonKorkeus                float64
 18  kayttovoima                object 
 19  iskutilavuus               float64
 20  suurinNettoteho            float64
 21  sylintereidenLkm           float64
 22  ahdin                      object 
 23  sahkohybridi               object 
 24  sahkohybridinluokka        float64
 25  merkkiSelvakielinen        object 
 26  mallimerkinta              object 
 27  vaihteisto                 object 
 28  vaihteidenLkm              float64
 29  kaupallinenNimi            object 
 30  voimanvalJaTehostamistapa  float64
 31  tyyppihyvaksyntanro        object 
 32  yksittaisKayttovoima       object 
 33  kunta                      float64
 34  Co2                        float64
 35  matkamittarilukema         float64
 36  valmistenumero2            object 
 37  jarnro                     int64  
dtypes: float64(20), int64(2), object(16)
memory usage: 824.9+ MB
</code></pre><p>Wow, that still leaves us with almost three million vehicles! I wonder how they are distributed over time? For that I will use <code>kayttoonottopvm</code> because it seems compatible with some other numbers based on quick Google sanity check.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span><span class=p>[</span><span class=s1>&#39;first_day_of_use&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;kayttoonottopvm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nb>format</span><span class=o>=</span><span class=s1>&#39;%Y%m</span><span class=si>%d</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>errors</span><span class=o>=</span><span class=s1>&#39;coerce&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;Y&#39;</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=s1>&#39;first_day_of_use&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>ajoneuvoluokka</span><span class=o>.</span><span class=n>count</span><span class=p>()</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>&lt;AxesSubplot:xlabel='first_day_of_use'&gt;
</code></pre><p><img loading=lazy src=index_files/figure-gfm/cell-8-output-2.png alt></p><p>Hmm, the latest yearly values of cars seem sensible and agree with the latest news about the number of new cars registered, but I am not sure about the older datapoints. <a href=https://www.traficom.fi/sites/default/files/media/file/Avoin%20Data%2010%20kysytyint%C3%A4%20kysymyst%C3%A4.pdf>The documentation</a> on Traficom&rsquo;s website reveals that the data only contains vehicles that have not been decommissioned. That might explain things. It&rsquo;s probably better to focus on the last ten years or so for any analysis as the numbers don&rsquo;t exactly match e.g. the ones shown on <a href=https://www.aut.fi/tilastot/ensirekisteroinnit/ensirekisterointien_vuosittainen_kehitys>the website of Autoalan Tiedotuskeskus</a> even though they are in the right ballpark.</p><h3 id=whats-the-most-popular-car-brand-in-finland>What&rsquo;s the most popular car brand in Finland?<a hidden class=anchor aria-hidden=true href=#whats-the-most-popular-car-brand-in-finland>#</a></h3><p>There&rsquo;s a gazilliong things you could dig out of this dataset but let&rsquo;s just pick one thing here: In the last ten years or so, what are the most popular car brands in Finland?</p><p>As a first step, let&rsquo;s look at the 30 most popular brands from 2010 onwards:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;first_day_of_use &gt; &#34;2009-12-31&#34;&#39;</span><span class=p>)[</span><span class=s1>&#39;merkkiSelvakielinen&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>Toyota            174487
Volvo             122651
Skoda             121543
Volkswagen, VW    120403
Mercedes-Benz     108587
Ford              100140
BMW                79618
Kia                79095
Audi               75403
Nissan             73693
Opel               59574
Volkswagen         49822
Hyundai            40568
Peugeot            34295
Renault            28302
Honda              27353
Citroen            25814
Seat               22952
Mitsubishi         22306
Mazda              20283
Subaru             11817
Suzuki             11708
Dacia              11635
Tesla               6697
Fiat                6289
Lexus               5180
Chevrolet           4848
Mini                4128
Porsche             3873
Land Rover          3455
Name: merkkiSelvakielinen, dtype: int64
</code></pre><p>Makes sort of sense, Toyota is popular here&mldr; but wait! Why do we have both <code>Volkswagen, VW</code> and <code>Volkswagen</code> in there? Well, as they say, 90% of data science work is cleaning data, and we are not even doing that much data science here. There&rsquo;s probably more dirty data beneath the surface but let&rsquo;s just clean this Volkswagen part:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span><span class=p>[</span><span class=s1>&#39;merkkiSelvakielinen&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>({</span><span class=s1>&#39;Volkswagen, VW&#39;</span><span class=p>:</span> <span class=s1>&#39;Volkswagen&#39;</span><span class=p>},</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;first_day_of_use &gt; &#34;2009-12-31&#34;&#39;</span><span class=p>)[</span><span class=s1>&#39;merkkiSelvakielinen&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>Toyota           174487
Volkswagen       170225
Volvo            122651
Skoda            121543
Mercedes-Benz    108587
Name: merkkiSelvakielinen, dtype: int64
</code></pre><p>Seems like that did the trick. Now it&rsquo;s a red hot race between Toyota and Volkswagen, a real nail-biter! Let&rsquo;s look at how the &ldquo;market shares&rdquo; of the top 9 brands have evolved in the recent years.</p><p>Probably there would be an easier way to do this with e.g. Seaborn but let&rsquo;s hack the <a href=https://en.wikipedia.org/wiki/Small_multiple>small multiple</a> plot with just Matplotlib. Pardon for the aggressive chaining of Pandas methods!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>brands_to_include</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Toyota&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Volkswagen&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Volvo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Skoda&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Mercedes-Benz&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Ford&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;BMW&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Kia&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Audi&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Filter in only the data we want</span>
</span></span><span class=line><span class=cl><span class=n>df_top_9</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;merkkiSelvakielinen == @brands_to_include&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;first_day_of_use &gt; &#34;2009-12-31&#34;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s1>&#39;first_day_of_use &lt; &#34;2022-01-01&#34;&#39;</span><span class=p>)</span> <span class=c1># Include only full years</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Groupby, aggregate count of rows, and pivot</span>
</span></span><span class=line><span class=cl><span class=n>df_top_9</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>df_top_9</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>groupby</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>df_top_9</span><span class=o>.</span><span class=n>first_day_of_use</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>year</span><span class=p>,</span> <span class=n>df_top_9</span><span class=o>.</span><span class=n>merkkiSelvakielinen</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>as_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)[</span><span class=s1>&#39;ajoneuvoluokka&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>count</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>pivot</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>index</span><span class=o>=</span><span class=s1>&#39;first_day_of_use&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;merkkiSelvakielinen&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=n>values</span><span class=o>=</span><span class=s1>&#39;ajoneuvoluokka&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Normalize monthly values</span>
</span></span><span class=line><span class=cl><span class=n>df_top_9</span> <span class=o>=</span> <span class=n>df_top_9</span><span class=o>.</span><span class=n>divide</span><span class=p>(</span><span class=n>df_top_9</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span> <span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Plot small multiples</span>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>15</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span> <span class=n>sharex</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>sharey</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>ix</span><span class=p>,</span> <span class=n>col</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>df_top_9</span><span class=o>.</span><span class=n>columns</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>ix</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>df_top_9</span><span class=p>[</span><span class=n>col</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>color</span><span class=o>=</span><span class=s1>&#39;k&#39;</span><span class=p>,</span> <span class=n>linewidth</span><span class=o>=</span><span class=mf>1.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=n>col</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>_</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s1>&#39;Finnish market share by car brand&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p><img loading=lazy src=index_files/figure-gfm/cell-11-output-1.png alt></p><p>One could argue the following trends based on the data:</p><ul><li>Volkswagen is declining steadily, although Skoda from the same conglomerate has been going up until 2021.</li><li>Kia has been increasing their market share in the recent years. This makes sense if you have been reading the headlines on the car market in Finland.</li><li>Toyota has been increasing their market share in the recent years. Toyota has always been a popular and respectable choice for a family car in Finland, and perhaps their investments in the hybrid technology are paying off?</li></ul><h3 id=what-could-be-next>What could be next?<a hidden class=anchor aria-hidden=true href=#what-could-be-next>#</a></h3><p>I will stop here with this toy analysis, but there are some more interesting but also more laborious questions that you could try to answer based on this dataset. For example:</p><ul><li>Do Finns buy (or at least register) more electric or hybrid cars? The data has information about this in the columns <code>kayttovoima</code>, <code>sahkohybridi</code>, and <code>sahkohybridinluokka</code> but a quick glance indicates that they would require some cleaning.</li><li>Have the cars got cleaner over time, i.e. do they emit less CO2 emissions? There&rsquo;s the <code>Co2</code> column in the data that could be used here.</li><li>If they have got cleaner, is that on the expense of performance? I think <code>suurinNettoteho</code> would be helpful here.</li></ul><p>If you got this far, why not go ahead and <a href="https://www.youtube.com/watch?v=Im3JzxlatUs">watch the music video for Gary Numan&rsquo;s Cars</a>?</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://pniskala.github.io/tags/development/>development</a></li><li><a href=https://pniskala.github.io/tags/communication/>communication</a></li><li><a href=https://pniskala.github.io/tags/data/>data</a></li></ul><nav class=paginav><a class=prev href=https://pniskala.github.io/posts/github_pages/><span class=title>« Prev</span><br><span>Learning by doing: Setting up a website with Hugo and GitHub Pages</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://pniskala.github.io/>Paavo Niskala</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>